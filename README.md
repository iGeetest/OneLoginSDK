# æ›´æ–°æ—¥å¿—
ç‰ˆæœ¬|æ›´æ–°å†…å®¹|æ›´æ–°æ—¥æœŸ
-----|-----|-----
**1.6.1** |1ã€è·å–æ‰‹æœºç½‘ç»œæ–¹æ³•é€‚é…iOS13| 2019-08-09
**1.6.0** |1ã€å¢åŠ æˆæƒé¡µé¢å¼¹çª—æ”¯æŒï¼›<br>2ã€å¢åŠ è®¾ç½®æ¨ªç«–å±çŠ¶æ€ä¸‹å„æ§ä»¶xè½´åç§»çš„åŠŸèƒ½ï¼›<br>3ã€å¢åŠ è®¾ç½®è¿”å›æŒ‰é’®ã€logoã€æˆæƒæŒ‰é’®ç­‰æ§ä»¶å¤§å°çš„åŠŸèƒ½ï¼›<br>4ã€å¢åŠ è®¾ç½®åˆ‡æ¢è´¦å·æŒ‰é’®ã€sloganã€æœåŠ¡æ¡æ¬¾å­—ä½“çš„åŠŸèƒ½ï¼› <br>5ã€å¢åŠ æ¨ªç«–å±è‡ªåŠ¨åˆ‡æ¢åŠŸèƒ½ï¼›<br>6ã€å¢åŠ æœåŠ¡æ¡æ¬¾æ’åºåŠŸèƒ½ï¼›<br>7ã€å®ç°æœåŠ¡æ¡æ¬¾SDKå†…éƒ¨è·³è½¬åŠŸèƒ½| 2019-08-08
**1.5.1** |1ã€ä¿®å¤å¯èƒ½çš„å¾ªç¯å¼•ç”¨é—®é¢˜ | 2019-08-07
**1.5.0** |1ã€æ¨ªå±æ”¯æŒï¼›<br>2ã€å¼€æ”¾é‡å¤é¢„å–å·ï¼›<br>3ã€ä¼˜åŒ–å¸ƒå±€<br>4ã€å…¶ä»–é—®é¢˜ä¿®å¤ | 2019-07-29
**1.4.2** |1ã€å°è£…å…³é—­æˆæƒé¡µé¢çš„æ–¹æ³•ï¼›<br>2ã€å†…å­˜æ³„éœ²å¤„ç†ï¼› | 2019-07-16
**1.4.1** |1ã€æ”¯æŒåŒå¡ï¼›<br>2ã€ä¼˜åŒ–å’Œç»Ÿä¸€é”™è¯¯ç ï¼›<br>3ã€å…¶ä»–Bugä¿®å¤ã€‚ | 2019-07-12
**1.3.0** |1ã€æˆæƒé¡µUIè‡ªå®šä¹‰å†…å®¹æ›´æ–°ï¼Œä¸‰ç½‘ç»Ÿä¸€ï¼Œå…è®¸æ’å…¥è‡ªå®šä¹‰æ§ä»¶ï¼›<br>2ã€æˆæƒé¡µé¢åˆ‡æ¢é€»è¾‘ä¼˜åŒ–ï¼Œå…è®¸æ‰‹åŠ¨æ§åˆ¶é¡µé¢æ¶ˆå¤±æ—¶é—´ï¼›<br>3ã€å…¶ä»–Bugä¿®å¤ã€‚ | 2019-06-14


---
title: ios
type: ios
order: 0
---

# æ¦‚è¿°åŠèµ„æº

## ç¯å¢ƒéœ€æ±‚

æ¡ç›®    	|èµ„æº             
----------|------------    
å¼€å‘ç›®æ ‡	|iOS8+      
å¼€å‘ç¯å¢ƒ	|Xcode 10 
ç³»ç»Ÿä¾èµ–	|`libc++.1.tbd`ã€`libz.1.2.8.tbd`
SDK ä¸‰æ–¹ä¾èµ–|`account_login_sdk_noui_core.framework`ã€`EAccountApiSDK.framework`ã€`TYRZSDK.framework`ã€`TYRZResource.bundle`

## ç›¸å…³å¼€å‘èµ„æ–™

æ¡ç›®         	|èµ„æº                
-------------	|----------------
äº§å“ç»“æ„æµç¨‹   	|[äº¤äº’æµç¨‹](https://docs.geetest.com/onelogin/overview/flowchart/#äº¤äº’æµç¨‹), [é€šè®¯æµç¨‹](https://docs.geetest.com/onelogin/overview/flowchart/#é€šè®¯æµç¨‹)
æ¥å£æ–‡æ¡£      	|[OneLogin iOS API Ref](https://docs.geetest.com/onelogin/apirefer/api/ios/) æˆ–æŸ¥çœ‹å¤´æ–‡ä»¶æ³¨é‡Š
é”™è¯¯ç 			|[Error Code åˆ—è¡¨](https://docs.geetest.com/onelogin/apirefer/errorcode/ios)


# å®‰è£…

## è·å– SDK åŠ Demo

### ä¸‹è½½è·å–

[ç‚¹å‡»ä¸‹è½½](https://docs.geetest.com/downloads/onelogin-ios-1.6.1.zip)

## å¯¼å…¥ SDK åˆ°é¡¹ç›®å·¥ç¨‹å¹¶é…ç½®å¼€å‘ç¯å¢ƒ

1. å°†ä¸‹è½½è·å–çš„**`OneLogin.framework`**, `account_login_sdk_noui_core.framework`ã€`EAccountApiSDK.framework`ã€`TYRZSDK.framework`ä»¥åŠåœ¨**`OneLoginResource.bundle`**ã€`TYRZResource.bundle`å…±6ä¸ªæ–‡ä»¶æ·»åŠ åˆ°å·¥ç¨‹ä¸­, ç¡®ä¿`Copy items if needed`å·²è¢«å‹¾é€‰ã€‚

	æ­¤å¤–, éœ€è¦æ·»åŠ `libc++.1.tbd`ã€`libz.1.2.8.tbd`åº“è¿›è¡Œä¾èµ–ã€‚
    
   æ·»åŠ å®Œå, ä»¥`Linked Frameworks and Libraries`æ–¹å¼å¯¼å…¥ frameworkã€‚åœ¨æ‹–å…¥`OneLogin.framework`, `account_login_sdk_noui_core.framework`ã€`EAccountApiSDK.framework`ã€`TYRZSDK.framework`åˆ°å·¥ç¨‹å, è¯·æ£€æŸ¥æ‰€æœ‰çš„`.framework`æ˜¯å¦è¢«æ·»åŠ åˆ°`PROJECT -> Build Phases -> Linked Frameworks and Libraries`, ä»¥ç¡®ä¿æ­£å¸¸ç¼–è¯‘ã€‚

2. é’ˆå¯¹é™æ€åº“ä¸­çš„`Category`, éœ€è¦åœ¨å¯¹åº” target çš„`Build Settings`->`Other Linker Flags`æ·»åŠ `-ObjC`ç¼–è¯‘é€‰é¡¹ã€‚å¦‚æœä¾ç„¶æœ‰é—®é¢˜ï¼Œå†æ·»åŠ `-all_load`ã€‚

3. é…ç½®ATSï¼Œåœ¨ info.plist æ–‡ä»¶ä¸­æ·»åŠ  App Transport Security Settings é¡¹ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ  Allow Arbitrary Loads å­é¡¹ï¼ŒåŒæ—¶å°†è¯¥å­é¡¹çš„å€¼è®¾ç½®ä¸º YESã€‚

## é…ç½®æ¥å£

å¼€å‘è€…é›†æˆå®¢æˆ·ç«¯ SDK å‰, å¿…é¡»å…ˆåœ¨æ‚¨çš„æœåŠ¡å™¨ä¸Šæ­å»ºç›¸åº”çš„[æœåŠ¡ç«¯è·å–ç™»å½•ä¿¡æ¯çš„æ¥å£](https://docs.geetest.com/onelogin/deploy/server/api)ï¼Œå¹¶é…ç½®ä»[æéªŒåå°](https://auth.geetest.com)è·å–çš„`AppID `ã€‚è¿™é‡Œä»¥æœåŠ¡ç«¯é…ç½®æˆåŠŸï¼Œå®¢æˆ·ç«¯å¼€å‘æ­¥éª¤ä¸ºä¾‹ï¼Œå¦‚ä¸‹ï¼š

1. ç”¨ `AppID` æ³¨å†Œ OneLogin

    ```objc
    [OneLogin registerWithAppID:@"---<ç”³è¯·çš„AppID>---"];
    ```

2. è°ƒç”¨é¢„å–å·æ¥å£

	ä»å›è°ƒä¸­å¯ä»¥è·å–åˆ°é¢„å–å·æ˜¯å¦æˆåŠŸçš„çŠ¶æ€
	
    ```objc
    [OneLogin preGetTokenWithCompletion:^(NSDictionary * _Nonnull sender) {
        NSLog(@"sender: %@", sender.description);
    }];    
    ```
    
3. è°ƒç”¨å–å·æ¥å£

	å¼€å‘è€…åœ¨å®Œæˆé¢„å–å·å, é€šè¿‡è¯¥æ¥å£è·å–ç”¨äºè·å–è¯¥ç”¨æˆ·æ‰‹æœºå·ä¿¡æ¯çš„è®¿é—®ä»¤ç‰Œ, ä½¿ç”¨è¯¥è®¿é—®ä»¤ç‰Œå»æŸ¥è¯¢ç”¨æˆ·çš„æ‰‹æœºå·åŠç›¸å…³ä¿¡æ¯ã€‚

    ```objc
    [OneLogin requestTokenWithViewController:self viewModel:viewModel completion:^(NSDictionary * _Nullable result) {
        NSNumber *status = [result objectForKey:@"status"];
        if ([@(200) isEqualToNumber:status]) { // è·å–tokenæˆåŠŸ
            // TO-DO
            // æ ¡éªŒå’Œè·å–ç™»å½•çš„ç”¨æˆ·çš„æ•°æ®
            
        }
        else {
            NSLog(@"result: %@", result);
        }
    }];
    ```

> é›†æˆä»£ç å‚è€ƒä¸‹æ–¹çš„**ä»£ç ç¤ºä¾‹**ã€‚æ›´è¿›ä¸€æ­¥çš„ç¤ºä¾‹, è§ç›¸å…³Demoã€‚


## ä»£ç ç¤ºä¾‹

åœ¨å·¥ç¨‹ä¸­çš„æ–‡ä»¶å¤´éƒ¨å¯¼å…¥é™æ€åº“ `OneLoginSDK.framework`

```objc
#import <OneLoginSDK/OneLoginSDK.h>
```

### æ³¨å†ŒåŠé¢„å–å·
    
åœ¨ç›¸åº”çš„æ§åˆ¶é¡µåˆå§‹åŒ–æ–¹æ³•ä¸­å¯¹`OneLoginSDK`å®ä¾‹è°ƒç”¨æ³¨å†Œæ–¹æ³•:
    
```objc
[OneLogin registerWithAppID:@"---<ç”³è¯·çš„AppID>---"];
```

### é¢„å–å·

åœ¨æ¯æ¬¡è·å–å…å¯†ç™»å½•çš„tokenä¹‹å‰, éœ€è¦è°ƒç”¨é¢„å–å·æ¥å£

```objc
[OneLogin preGetTokenWithCompletion:^(NSDictionary * _Nonnull sender) {
    NSLog(@"sender: %@", sender.description);
    NSNumber *status = [sender objectForKey:@"status"];
    if (status && [@(200) isEqualToNumber:status]) {
        // é¢„å–å·æˆåŠŸ
        
    }
    else {
#warning è¯·å¤„ç†é¢„å–å·çš„é”™è¯¯, æ›´å¤šé”™è¯¯ç è¯·å‚è€ƒé”™è¯¯ç æ–‡æ¡£
        NSString *errCode   = [sender objectForKey:@"errorCode"];
        NSString *msg       = [sender objectForKey:@"msg"];
        NSString *processID = [sender objectForKey:@"processID"];
        NSString *appID     = [sender objectForKey:@"appID"];
        NSString *operator  = [sender objectForKey:@"operatorType"];
        
        NSLog(@"[Operator: %@] - [Error Code: %@] - [Message: %@] - [ProccesID: %@] - [APPID: %@]", operator, errCode, msg, processID, appID);
        
        // é¢„å–å·å¤±è´¥
        if ([@"-20101" isEqualToString:errCode]) {
            // TO-DO
            // æœªé…ç½® AppIDï¼Œè¯·é€šè¿‡ registerWithAppID: é…ç½® AppID
        }
        else if ([@"-20102" isEqualToString:errCode]) {
            // TO-DO
            // é‡å¤è°ƒç”¨ preGetTokenWithCompletion:
        }
        else if ([@"-20202" isEqualToString:errCode]) {
            // TO-DO
            // æ£€æµ‹åˆ°æœªå¼€å¯èœ‚çªç½‘ç»œ
        }
        else if ([@"-20203" isEqualToString:errCode]) {
            // TO-DO
            // ä¸æ”¯æŒçš„è¿è¥å•†ç±»å‹
        }
        else {
            // TO-DO
            // å…¶ä»–é”™è¯¯ç±»å‹
        }
    }
}];
```
    
### è·å–å…å¯†ç™»å½• token å¹¶ä½¿ç”¨ token è·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯
    
é€šè¿‡`requestTokenWithViewController:viewModel:completion:`è·å–å…å¯†ç™»å½•tokenå, åœ¨ä½¿ç”¨tokenè·å–ç”¨æˆ·ç™»å½•ä¿¡æ¯ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­, éœ€è¦è®¾ç½®`UIViewController`, ä»¥å±•ç¤ºæˆæƒé¡µé¢, å¹¶è®©**ç”¨æˆ·æ¥å—ä½¿ç”¨æ¡æ¬¾**

è‡ªå®šä¹‰éƒ¨åˆ†è§Demoå’Œ[æ¥å£æ–‡æ¡£](https://docs.geetest.com/onelogin/apirefer/api/ios/)
    
```objc
- (void)requestToken {
    OLAuthViewModel *viewModel = [[OLAuthViewModel alloc] init];
    // TO-DO è‡ªå®šä¹‰viewModel
    // viewModel...
    
    [OneLogin requestTokenWithViewController:self viewModel:viewModel completion:^(NSDictionary * _Nullable result) {
        NSLog(@"token result: %@", result);
        NSNumber *status = [result objectForKey:@"status"];
        if ([@(200) isEqualToNumber:status]) {
            // TO-DO
            // è·å–åˆ°token, å¹¶è¿›è¡Œæ‰‹æœºå·æŸ¥è¯¢
            NSString *processID = [result objectForKey:@"processID"];
            NSString *appID     = [result objectForKey:@"appID"];
            NSString *token     = [result objectForKey:@"token"];
            
            [self validateTokenAndGetLoginInfo:token appID:appID processID:processID];
        }
        else {
#warning è¯·å¤„ç†è·å–tokençš„é”™è¯¯, æ›´å¤šé”™è¯¯ç è¯·å‚è€ƒé”™è¯¯ç æ–‡æ¡£
            NSString *errCode   = [result objectForKey:@"errorCode"];
            NSString *msg       = [result objectForKey:@"msg"];
            NSString *processID = [result objectForKey:@"processID"];
            NSString *appID     = [result objectForKey:@"appID"];
            NSString *operator  = [result objectForKey:@"operatorType"];
            
            // è·å–ç½‘å…³tokenå¤±è´¥
            if ([@"-20103" isEqualToString:errCode]) {
                // TO-DO
                // é‡å¤è°ƒç”¨ requestTokenWithViewController:viewModel:completion:
            }
            else if ([@"-20202" isEqualToString:errCode]) {
                // TO-DO
                // æ£€æµ‹åˆ°æœªå¼€å¯èœ‚çªç½‘ç»œ
            }
            else if ([@"-20203" isEqualToString:errCode]) {
                // TO-DO
                // ä¸æ”¯æŒçš„è¿è¥å•†ç±»å‹
            }
            else if ([@"-20204" isEqualToString:errCode]) {
                // TO-DO
                // æœªè·å–æœ‰æ•ˆçš„ `accessCode`, è¯·ç¡®ä¿å…ˆè°ƒç”¨è¿‡ preGetTokenWithCompletion:
            }
            else if ([@"-20302" isEqualToString:errCode]) {
                // TO-DO
                // ç”¨æˆ·ç‚¹å‡»äº†æˆæƒé¡µé¢ä¸Šçš„è¿”å›æŒ‰é’®, æˆæƒé¡µé¢å°†è‡ªåŠ¨å…³é—­
            }
            else if ([@"-20303" isEqualToString:errCode]) {
                // TO-DO
                // ç”¨æˆ·ç‚¹å‡»äº†æˆæƒé¡µé¢ä¸Šçš„åˆ‡æ¢è´¦å·æŒ‰é’®, æˆæƒé¡µé¢ä¸ä¼šè‡ªåŠ¨ç»™å…³é—­ã€‚å¦‚éœ€å…³é—­, éœ€è°ƒç”¨ [OneLogin dismissAuthViewController]ã€‚
            }
            else {
                // TO-DO
                // å…¶ä»–é”™è¯¯ç±»å‹
            }
            
            NSLog(@"[Operator: %@] - [Error Code: %@] - [Message: %@] - [ProccesID: %@] - [APPID: %@]", operator, errCode, msg, processID, appID);
            
            // ä¸€é”®ç™»å½•å¤±è´¥æ‰‹åŠ¨å…³é—­æˆæƒé¡µé¢
            [OneLogin dismissAuthViewController];
        }
    }];
}

// ä½¿ç”¨tokenè¿›è¡Œæ ¡éªŒ, å¹¶è·å–ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯
- (void)validateTokenAndGetLoginInfo:(NSString *)token appID:(NSString *)appID processID:(NSString *)processID {
    
    // æ ¹æ®ç”¨æˆ·è‡ªå·±æ¥å£æ„é€ 
    // ä¸‹é¢ä»¥POST, application/json ä¸ºä¾‹
    NSURL *url = [NSURL URLWithString:@"---<æ‚¨çš„æ ¡éªŒæ¥å£åœ°å€>---"];
    
    NSMutableURLRequest *mRequest = [[NSMutableURLRequest alloc] initWithURL:url cachePolicy:(NSURLRequestCachePolicy)0 timeoutInterval:10.0];
    
    NSMutableDictionary *params = [[NSMutableDictionary alloc] init];
    [params setValue:processID  forKey:@"process_id"];
    [params setValue:appID      forKey:@"id_2_sign"];
    [params setValue:token      forKey:@"token"];
    
    NSData *data = [NSJSONSerialization dataWithJSONObject:params options:(NSJSONWritingOptions)0 error:nil];
    
    mRequest.HTTPMethod = @"POST";
    mRequest.HTTPBody = data;
    
    [[[NSURLSession sharedSession] dataTaskWithRequest:mRequest
                                     completionHandler:^(NSData * _Nullable data, NSURLResponse * _Nullable response, NSError * _Nullable error) {
                                     // TO-DO
                                     // å¤„ç†ç”¨æˆ·ä¿¡æ¯
                                     NSLog(@"result data: %@", [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]);
    }] resume];
    
}
```

> æ›´è¯¦ç»†ç¤ºä¾‹ä»£ç è§ Demo
> 
> æ›´è¯¦ç»†çš„æ¥å£è¯´æ˜è§æ¥å£æ–‡æ¡£æˆ– SDK å¤´æ–‡ä»¶


---
title: ios
type: ios
order: 0
---

[TOC]

# OneLogin

`OneLogin` çš„ä¸»è¦å¤–éƒ¨è°ƒç”¨æ¥å£

## Protocol

### userDidDismissAuthViewController

ç”¨æˆ·ç‚¹å‡»äº†æˆæƒé¡µé¢çš„è¿”å›æŒ‰é’®

**Declaration**

```objc
- (void)userDidDismissAuthViewController;
```

### userDidSwitchAccount

ç”¨æˆ·ç‚¹å‡»äº†æˆæƒé¡µé¢çš„"åˆ‡æ¢è´¦æˆ·"æŒ‰é’®

**Declaration**

```objc
- (void)userDidSwitchAccount;
```

## Method

### currentNetworkInfo

è·å–å½“å‰ OneLogin å¯ç”¨çš„ç½‘ç»œä¿¡æ¯

**Declaration**

```objc
+ (nullable OLNetworkInfo *)currentNetworkInfo;
```

**Discussion**

1. å½“ä½¿ç”¨çš„æ˜¯éç§»åŠ¨ã€è”é€šã€ç”µä¿¡ä¸‰å¤§è¿è¥å•†, åˆ™è¿”å›nilã€‚
2. OneLogin ä»…åœ¨å¤§é™†æ”¯æŒç§»åŠ¨ã€è”é€šã€ç”µä¿¡ä¸‰å¤§è¿è¥å•†ã€‚

**Return Value**

æè¿°å½“å‰å¯ç”¨çš„ç½‘ç»œä¿¡æ¯

**Seealso**

[OLNetworkInfo](#OLNetworkInfo)

### registerWithAppID:

å‘SDKæ³¨å†ŒAppID

**Declaration**

```objc
+ (void)registerWithAppID:(NSString *)appID;
```

**Parameters**

Param		|Description
----------|---------------	
appID 		|äº§å“id, è¯·åœ¨å®˜ç½‘æ³¨å†Œè·å–

### setDelegate:

è®¾ç½®ä»£ç†å¯¹è±¡

**Declaration**

```objc
+ (void)setDelegate:(nullable id<OneLoginDelegate>)delegate;
```

**Parameters**

Param		|Description
----------|---------------	
delegate 	|ä»£ç†å¯¹è±¡

### setRequestTimeout:

è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é•¿ã€‚é»˜è®¤8ç§’ã€‚

**Declaration**

```objc
+ (void)setRequestTimeout:(NSTimeInterval)timeout;
```

**Parameters**

Param		|Description
----------|---------------	
timeout 	|è¯·æ±‚è¶…æ—¶çš„æ—¶é•¿

### preGetTokenWithCompletion:

é¢„å–å·æ¥å£

**Declaration**

```objc
+ (void)preGetTokenWithCompletion:(void(^)(NSDictionary *sender))completion;
```

**Parameters**

Param		|Description
----------|---------------	
completion|é¢„å–å·çš„å¤„ç†å›è°ƒ

**Discussion**

è°ƒç”¨é™åˆ¶è¯´æ˜: åœ¨è°ƒç”¨è¯¥æ–¹æ³•å, æœªå›è°ƒä¹‹å‰, å†æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶, æ–¹æ³•ä¼šç›´æ¥è·³å‡º, ä¸æ‰§è¡Œé¢„å–å·é€»è¾‘, å¹¶è¿”å›ç›¸å…³é”™è¯¯ã€‚

é¢„å–å·æˆåŠŸåçš„æœ‰æ•ˆæœŸè¯´æ˜: æœ‰æ•ˆæœŸå†…éœ€è¦è°ƒç”¨ `requestTokenWithViewController:viewModel:completion:`,
 å¦åˆ™éœ€è¦é‡æ–°è®¿é—® `preGetTokenWithCompletion:`ã€‚ å…¶ä¸­ä¸­å›½ç§»åŠ¨æœ‰æ•ˆæœŸä¸º 1 å°æ—¶,
 ä¸­å›½è”é€šå’Œä¸­å›½ç”µä¿¡ä¸º 10 åˆ†é’Ÿã€‚

å›è°ƒè¿”å›æ•°æ®ç¤ºä¾‹:

```
 // æˆåŠŸçš„è¿”å›æ ¼å¼
 {
 status = 200; // NSNumber, 200ä¸ºæˆåŠŸçš„çŠ¶æ€ç 
 processID = 47dab9b7c26629cd9bc117f88e2f9233; // NSString, æµæ°´å·
 appID = 2**************************d; // NSString, äº§å“ID
 operatorType = CU; // NSString, è¿è¥å•†ç±»å‹(CM/CU/CT)
 msg = "\U83b7\U53d6accessCode\U6210\U529f"; // NSString, ç›¸å…³çš„æè¿°æ¶ˆæ¯
 }
 
 // å¤±è´¥çš„è¿”å›æ ¼å¼
 {
 status = 500; // NSNumber, 500ä¸ºå¤±è´¥çš„çŠ¶æ€ç 
 processID = 47dab9b7c26629********f88e2f9233; // NSString, æµæ°´å·
 appID = 2**************************d; // NSString, äº§å“ID
 operatorType = CT; // NSString, è¿è¥å•†ç±»å‹(CM/CU/CT)
 errorCode = -30003, // NSNumber, å½“è¿è¥å•†ä¸æˆåŠŸæ—¶çš„é”™è¯¯ç 
 msg = "\U83b7\U53d6accessCode\U6210\U529f"; // NSString, ç›¸å…³çš„æè¿°æ¶ˆæ¯
 }
```

### requestTokenWithViewController:viewModel:completion:

å–å·æ¥å£

**Declaration**

```objc
+ (void)requestTokenWithViewController:(UIViewController *)viewController viewModel:(nullable OLAuthViewModel *)viewModel completion:(void(^)(NSDictionary * _Nullable result))completion;
```

**Parameters**

Param		|Description
----------|---------------	
viewController|è§†å›¾æ§åˆ¶å™¨
viewModel	|è‡ªå®šä¹‰çš„è¯•å›¾æ¨¡å‹
completion|å–å·æ¥å£çš„å¤„ç†å›è°ƒ

**Discussion**

è°ƒç”¨é™åˆ¶è¯´æ˜: ä¸ºé¿å…æˆæƒé¡µé¢å¤šæ¬¡å¼¹å‡º, åœ¨è°ƒç”¨è¯¥æ–¹æ³•å, æˆæƒé¡µé¢å¼¹å‡ºå, å†æ¬¡è°ƒç”¨è¯¥æ–¹æ³•æ—¶, è¯¥æ–¹æ³•ä¼šç›´æ¥è·³å‡º, ä¸æ‰§è¡Œæˆæƒé€»è¾‘ã€‚

éœ€è¦ç”¨æˆ·åœ¨å¼¹å‡ºçš„é¡µé¢ä¸ŠåŒæ„æœåŠ¡æ„æ¡æ¬¾å, æ‰ä¼šè¿›è¡Œå…å¯†è®¤è¯ã€‚

æˆæƒé¡µé¢å¼¹å‡ºå, éœ€è¦æ‰‹åŠ¨è°ƒç”¨`[OneLogin dismissAuthViewController];`å…³é—­`OLAuthViewContorller`ã€‚

tokenæœ‰æ•ˆæœŸ: ä¸­å›½ç§»åŠ¨çš„æœ‰æ•ˆæœŸä¸º 2 åˆ†é’Ÿï¼Œä¸­å›½è”é€šçš„ä¸º 30 åˆ†é’Ÿï¼Œä¸­å›½ç”µä¿¡çš„ä¸º 30 å¤©ã€‚

å›è°ƒè¿”å›æ•°æ®ç¤ºä¾‹:

```
 // æˆåŠŸè¿”å›çš„æ ¼å¼:
 {
 status = 200; // NSNumber, 200ä¸ºæˆåŠŸçš„çŠ¶æ€ç 
 processID = 47dab9b7c26629cd9bc117********33; // NSString, æµæ°´å·
 appID = 2**************************d; // NSString, äº§å“ID
 token = 62718774ad1247188bc678********d3; // NSString, è¿è¥å•†è¿”å›çš„accessToken, ç”¨äºæŸ¥è¯¢çœŸå®çš„æœ¬æœºå·
 operatorType = CU; // NSString, è¿è¥å•†ç±»å‹(CM/CU/CT)
 msg = "\U83b7\U53d6accessCode\U6210\U529f"; // NSString, è¿è¥å•†è¿”å›çš„Msg
 }
 
 // å¤±è´¥è¿”å›çš„æ ¼å¼
 {
 status = 500; // NSNumber, 500ä¸ºå¤±è´¥çš„çŠ¶æ€ç 
 processID = 47dab9b7c26629cd9bc117********33; // NSString, æµæ°´å·
 appID = 2**************************d; // NSString, äº§å“ID
 operatorType = CT; // NSString, è¿è¥å•†ç±»å‹(CM/CU/CT)
 errorCode = -30003, // NSNumber, è¿è¥å•†è¿”å›çš„é”™è¯¯ç 
 msg = "\U83b7\U53d6accessCode\U6210\U529f"; // NSString, ç›¸å…³çš„æè¿°æ¶ˆæ¯
 }
```

### dismissAuthViewController

å…³é—­å½“å‰çš„æˆæƒé¡µé¢

**Declaration**

```objc
+ (void)dismissAuthViewController:(void (^ __nullable)(void))completion;
```

**Discussion**

è¯·ä¸è¦ä½¿ç”¨å…¶ä»–æ–¹å¼å…³é—­æˆæƒé¡µé¢, å¦åˆ™å¯èƒ½å¯¼è‡´ OneLogin æ— æ³•å†æ¬¡è°ƒèµ·

### sdkVersion

è·å–SDKç‰ˆæœ¬å·

**Declaration**

```objc
+ (NSString *)sdkVersion;
```

**Return Value**

å½“å‰çš„SDKç‰ˆæœ¬å·

### setLogEnabled:

å…³é—­æ—¥å¿—

**Declaration**

```objc
+ (void)setLogEnabled:(BOOL)enabled;
```

**Parameters**

Param		|Description
----------|---------------	
enabled 	|YESï¼Œå…è®¸æ‰“å°æ—¥å¿— NOï¼Œç¦æ­¢æ‰“å°æ—¥å¿—

**Discussion**

OneLogin SDKå†…éƒ¨çš„æ—¥å¿—å¯ä»¥é€šè¿‡ `ğŸ‘â€ğŸ—¨[OneLoginSDK]ğŸ‘â€ğŸ—¨` æ¥ç­›é€‰

**Return Value**

å½“å‰çš„SDKç‰ˆæœ¬å·

### isLogEnabled

è·å–æ—¥å¿—å¼€å…³çŠ¶æ€

**Declaration**

```objc
+ (BOOL)isLogEnabled;
```

**Return Value**

YESï¼Œå…è®¸æ‰“å°æ—¥å¿— NOï¼Œç¦æ­¢æ‰“å°æ—¥å¿—

# OLAuthViewModel

æˆæƒé¡µé¢è‡ªå®šä¹‰UIæ¨¡å‹

## Enum

### OLRect

å¸ƒå±€ç»“æ„ä½“

**Declaration**

```objc
typedef struct OLRect {
    /**
     ç«–å±æ—¶
     å¯¼èˆªæ éšè—æ—¶ï¼Œä¸ºæ§ä»¶é¡¶éƒ¨åˆ°çŠ¶æ€æ çš„è·ç¦»ï¼›å¯¼èˆªæ æ˜¾ç¤ºæ—¶ï¼Œä¸ºæ§ä»¶é¡¶éƒ¨åˆ°å¯¼èˆªæ åº•éƒ¨çš„è·ç¦»
     å¼¹çª—æ—¶
     ä¸ºæ§ä»¶é¡¶éƒ¨åˆ°å¼¹çª—é¡¶éƒ¨çš„è·ç¦»
     */
    CGFloat portraitTopYOffset;
    
    /**
     ç«–å±æ—¶
     æ§ä»¶çš„xè½´ä¸­ç‚¹åˆ°å±å¹•xè½´ä¸­ç‚¹çš„è·ç¦»ï¼Œé»˜è®¤ä¸º0
     å¼¹çª—æ—¶
     æ§ä»¶çš„xè½´ä¸­ç‚¹åˆ°å¼¹çª—xè½´ä¸­ç‚¹çš„è·ç¦»ï¼Œé»˜è®¤ä¸º0
     */
    CGFloat portraitCenterXOffset;
    
    /**
     ç«–å±æ—¶
     æ§ä»¶çš„å·¦è¾¹ç¼˜åˆ°å±å¹•å·¦è¾¹ç¼˜çš„è·ç¦»ï¼Œé»˜è®¤ä¸º0
     å¼¹çª—æ—¶
     æ§ä»¶çš„å·¦è¾¹ç¼˜åˆ°å±å¹•å·¦è¾¹ç¼˜çš„è·ç¦»ï¼Œé»˜è®¤ä¸º0
     
     portraitLeftXOffsetä¸portraitCenterXOffsetè®¾ç½®ä¸€ä¸ªå³å¯ï¼ŒportraitLeftXOffsetä¼˜å…ˆçº§å¤§äºportraitCenterXOffsetï¼Œ
     è®¾ç½®æ­¤å±æ€§æ—¶ï¼ŒportraitCenterXOffsetå±æ€§å¤±æ•ˆ
     */
    CGFloat portraitLeftXOffset;
    
    /**
     æ¨ªå±æ—¶
     å¯¼èˆªæ éšè—æ—¶ï¼Œä¸ºæ§ä»¶é¡¶éƒ¨åˆ°å±å¹•é¡¶éƒ¨çš„è·ç¦»ï¼›å¯¼èˆªæ æ˜¾ç¤ºæ—¶ï¼Œä¸ºæ§ä»¶é¡¶éƒ¨åˆ°å¯¼èˆªæ åº•éƒ¨çš„è·ç¦»
     å¼¹çª—æ—¶
     ä¸ºæ§ä»¶é¡¶éƒ¨åˆ°å¼¹çª—é¡¶éƒ¨çš„è·ç¦»
     */
    CGFloat landscapeTopYOffset;
    
    /**
     æ¨ªå±æ—¶
     æ§ä»¶çš„xè½´ä¸­ç‚¹åˆ°å±å¹•xè½´ä¸­ç‚¹çš„è·ç¦»ï¼Œé»˜è®¤ä¸º0
     å¼¹çª—æ—¶
     æ§ä»¶çš„xè½´ä¸­ç‚¹åˆ°å¼¹çª—xè½´ä¸­ç‚¹çš„è·ç¦»ï¼Œé»˜è®¤ä¸º0
     */
    CGFloat landscapeCenterXOffset;
    
    /**
     æ¨ªå±æ—¶
     æ§ä»¶çš„å·¦è¾¹ç¼˜åˆ°å±å¹•å·¦è¾¹ç¼˜çš„è·ç¦»ï¼Œé»˜è®¤ä¸º0
     å¼¹çª—æ—¶
     æ§ä»¶çš„å·¦è¾¹ç¼˜åˆ°å±å¹•å·¦è¾¹ç¼˜çš„è·ç¦»ï¼Œé»˜è®¤ä¸º0
     
     landscapeLeftXOffsetä¸landscapeCenterXOffsetè®¾ç½®ä¸€ä¸ªå³å¯ï¼ŒlandscapeLeftXOffsetä¼˜å…ˆçº§å¤§äºlandscapeCenterXOffsetï¼Œ
     è®¾ç½®æ­¤å±æ€§æ—¶ï¼ŒlandscapeCenterXOffsetå±æ€§å¤±æ•ˆ
     */
    CGFloat landscapeLeftXOffset;
    
    /**
     æ§ä»¶å¤§å°ï¼Œåªæœ‰å®½åº¦ã€é«˜åº¦åŒæ—¶å¤§äº0ï¼Œè®¾ç½®çš„sizeæ‰ä¼šç”Ÿæ•ˆï¼Œå¦åˆ™ä¸ºæ§ä»¶é»˜è®¤çš„size
     */
    CGSize size;
} OLRect;
```

**Discussion**

1. è‹¥æˆæƒé¡µé¢åªæ”¯æŒç«–å±ï¼Œåªè®¾ç½®ç«–å±æ–¹å‘åç§»ï¼›
2. è‹¥æˆæƒé¡µé¢åªæ”¯æŒæ¨ªå±ï¼Œåªè®¾ç½®æ¨ªå±æ–¹å‘åç§»ï¼›
3. è‹¥æˆæƒé¡µé¢æ”¯æŒæ—‹è½¬è‡ªåŠ¨åˆ‡æ¢æ¨ªç«–å±ï¼Œåˆ™åŒæ—¶è®¾ç½®ç«–å±æ–¹å‘å’Œæ¨ªå±æ–¹å‘åç§»ï¼›
4. å¼¹çª—æ¨¡å¼ï¼ŒåŒä»¥ä¸Š1ã€2ã€3ï¼›
5. sizeé»˜è®¤éƒ½å¯ä»¥ä¸ç”¨è®¾ç½®ï¼Œä¼šæ ¹æ®å­—ä½“å¤§å°è‡ªé€‚åº”ï¼›
6. xè½´æ–¹å‘åç§»é‡æœ‰ä¸¤ä¸ªå€¼å¯ä»¥è®¾ç½®ï¼ŒportraitCenterXOffsetä¸ºæ§ä»¶çš„xè½´ä¸­ç‚¹åˆ°å¼¹çª—xè½´ä¸­ç‚¹çš„è·ç¦»ï¼ŒportraitLeftXOffsetä¸ºæ§ä»¶çš„å·¦è¾¹ç¼˜åˆ°å±å¹•å·¦è¾¹ç¼˜çš„è·ç¦»ï¼Œä¸¤è€…é€‰å…¶ä¸€å³å¯ã€‚

### OLAuthPopupAnimationStyle

å¼¹çª—æ¨¡å¼æ—¶æ”¯æŒçš„åŠ¨ç”»ç±»å‹

**Declaration**

```objc
/**
 * @abstract å¼¹çª—æ¨¡å¼æ—¶æ”¯æŒçš„åŠ¨ç”»ç±»å‹
 */
typedef NS_ENUM(NSInteger, OLAuthPopupAnimationStyle) {
    OLAuthPopupAnimationStyleCoverVertical = 0,
    OLAuthPopupAnimationStyleFlipHorizontal,
    OLAuthPopupAnimationStyleCrossDissolve,
    OLAuthPopupAnimationStyleCustom
};
```

### OLLoadingViewBlock

æˆæƒé¡µè‡ªå®šä¹‰Loadingçš„Block

**Declaration**

```objc
typedef void(^OLLoadingViewBlock)(UIView *containerView);
```

**Discussion**

æˆæƒé¡µè‡ªå®šä¹‰Loadingï¼Œä¼šåœ¨ç‚¹å‡»ç™»å½•æŒ‰é’®ä¹‹åè§¦å‘`containerView`ä¸ºloadingçš„å…¨å±è’™ç‰ˆviewã€‚è¯·è‡ªè¡Œåœ¨`containerView`æ·»åŠ è‡ªå®šä¹‰loadingã€‚è®¾ç½®blockåï¼Œé»˜è®¤loadingå°†æ— æ•ˆã€‚

### OLCustomUIHandler

æˆæƒç™»å½•é¡µé¢è‡ªå®šä¹‰è§†å›¾

**Declaration**

```objc
typedef void(^OLCustomUIHandler)(UIView *customAreaView);
```

**Discussion**

`customAreaView`ä¸ºæˆæƒé¡µé¢çš„ viewï¼Œå¦‚ï¼Œå¯å°†ä¸‰æ–¹ç™»å½•æ·»åŠ åˆ°æˆæƒç™»å½•é¡µé¢

## Property

### statusBarStyle

çŠ¶æ€æ æ ·å¼ã€‚ é»˜è®¤ `UIStatusBarStyleDefault`ã€‚

**Declaration**

```objc
@property (nonatomic, assign) UIStatusBarStyle statusBarStyle;
```

### naviTitle

æˆæƒé¡µå¯¼èˆªçš„æ ‡é¢˜ã€‚é»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) NSAttributedString *naviTitle;
```

### naviBgColor

æˆæƒé¡µå¯¼èˆªçš„èƒŒæ™¯é¢œè‰²ã€‚é»˜è®¤ç™½è‰²ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIColor *naviBgColor;
```

### naviBackImage

æˆæƒé¡µå¯¼èˆªå·¦è¾¹çš„è¿”å›æŒ‰é’®çš„å›¾ç‰‡ã€‚é»˜è®¤ç™½è‰²ç³»ç»Ÿæ ·å¼è¿”å›å›¾ç‰‡ã€‚å°ºå¯¸çº¦æŸä¸º22x22ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIImage *naviBackImage;
```

### naviRightControl

æˆæƒé¡µå¯¼èˆªå³è¾¹çš„è‡ªå®šä¹‰æ§ä»¶ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIView *naviRightControl;
```

### naviHidden

å¯¼èˆªæ éšè—ã€‚é»˜è®¤ä¸éšè—ã€‚

**Declaration**

```objc
@property (nonatomic, assign) BOOL naviHidden;
```

### backButtonRect

è¿”å›æŒ‰é’®ä½ç½®åŠå¤§å°ï¼Œè¿”å›æŒ‰é’®æœ€å¤§sizeä¸ºCGSizeMake(40, 40)ã€‚

**Declaration**

```objc
@property (nonatomic, assign) OLRect backButtonRect;
```

### backButtonHidden

è¿”å›æŒ‰é’®éšè—ã€‚é»˜è®¤ä¸éšè—ã€‚

**Declaration**

```objc
@property (nonatomic, assign) OLRect backButtonHidden;
```

### appLogo

æˆæƒé¡µé¢ä¸Šå±•ç¤ºçš„å›¾æ ‡ã€‚é»˜è®¤ä¸º "OneLogin" å›¾æ ‡ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIImage *appLogo;
```

### logoRect

Logo ä½ç½®åŠå¤§å°ã€‚

**Declaration**

```objc
@property (nonatomic, assign) OLRect logoRect;
```

### logoHidden

Logo å›¾ç‰‡éšè—ã€‚é»˜è®¤ä¸éšè—ã€‚

**Declaration**

```objc
@property (nonatomic, assign) BOOL logoHidden;
```

### phoneNumColor

å·ç é¢„è§ˆæ–‡å­—çš„é¢œè‰²ã€‚é»˜è®¤é»‘è‰²ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIColor *phoneNumColor;
```

### phoneNumFont

å·ç é¢„è§ˆæ–‡å­—çš„å­—ä½“ã€‚é»˜è®¤ç²—ä½“ï¼Œ24ptã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIFont *phoneNumFont;
```

### phoneNumRect

å·ç é¢„è§ˆ ä½ç½®åŠå¤§å°ï¼Œç”µè¯å·ç ä¸æ”¯æŒè®¾ç½®å¤§å°ï¼Œå¤§å°æ ¹æ®ç”µè¯å·ç æ–‡å­—è‡ªé€‚åº”ã€‚

**Declaration**

```objc
@property (nonatomic, assign) OLRect phoneNumRect;
```

### switchButtonText

æˆæƒé¡µåˆ‡æ¢è´¦å·æŒ‰é’®çš„æ–‡æ¡ˆã€‚é»˜è®¤ä¸ºâ€œåˆ‡æ¢è´¦å·â€ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, copy) NSString *switchButtonText;
```

### switchButtonColor

æˆæƒé¡µåˆ‡æ¢è´¦å·æŒ‰é’®çš„é¢œè‰²ã€‚é»˜è®¤è“è‰²ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIColor *switchButtonColor;
```

### switchButtonFont

æˆæƒé¡µåˆ‡æ¢è´¦å·çš„å­—ä½“ã€‚é»˜è®¤å­—ä½“ï¼Œ15ptã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIFont *switchButtonFont;
```

### switchButtonRect

æˆæƒé¡µåˆ‡æ¢è´¦å·æŒ‰é’® ä½ç½®åŠå¤§å°ã€‚

**Declaration**

```objc
@property (nonatomic, assign) OLRect switchButtonRect;
```

### switchButtonHidden

éšè—åˆ‡æ¢è´¦å·æŒ‰é’®ã€‚é»˜è®¤ä¸éšè—ã€‚

**Declaration**

```objc
@property (nonatomic, assign) BOOL switchButtonHidden;
```

### authButtonImages

æˆæƒé¡µè®¤è¯æŒ‰é’®çš„èƒŒæ™¯å›¾ç‰‡, @[æ­£å¸¸çŠ¶æ€çš„èƒŒæ™¯å›¾ç‰‡, ä¸å¯ç”¨çŠ¶æ€çš„èƒŒæ™¯å›¾ç‰‡, é«˜äº®çŠ¶æ€çš„èƒŒæ™¯å›¾ç‰‡]ã€‚é»˜è®¤æ­£å¸¸çŠ¶æ€ä¸ºè“è‰²çº¯è‰², ä¸å¯ç”¨çŠ¶æ€çš„èƒŒæ™¯å›¾ç‰‡æ—¶ä¸ºç°è‰², é«˜äº®çŠ¶æ€ä¸ºç°è“è‰²ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) NSArray<UIImage *> *authButtonImages;
```

### authButtonTitle

æˆæƒæŒ‰é’®æ–‡æ¡ˆã€‚é»˜è®¤ç™½è‰²çš„"ä¸€é”®ç™»å½•"ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) NSAttributedString *authButtonTitle;
```

### authButtonRect

æˆæƒæŒ‰é’® ä½ç½®åŠå¤§å°ã€‚

**Declaration**

```objc
@property (nonatomic, assign) OLRect authButtonRect;
```

### sloganRect

Slogan ä½ç½®åŠå¤§å°ã€‚

**Declaration**

```objc
@property (nonatomic, assign) OLRect sloganRect;
```

### sloganTextColor

Slogan æ–‡å­—é¢œè‰²ã€‚é»˜è®¤ç°è‰², 12ptã€‚

**Declaration**

```objc
@property (nonatomic, strong) UIColor *sloganTextColor;
```

### sloganTextFont

Sloganå­—ä½“ã€‚é»˜è®¤å­—ä½“, 12ptã€‚

**Declaration**

```objc
@property (nonatomic, strong) UIFont *sloganTextFont;
```

### defaultCheckBoxState

æˆæƒé¡µé¢ä¸Šæ¡æ¬¾å‹¾é€‰æ¡†åˆå§‹çŠ¶æ€ã€‚é»˜è®¤ YESã€‚

**Declaration**

```objc
@property (nonatomic, assign) BOOL defaultCheckBoxState;
```

### checkedImage

æˆæƒé¡µé¢ä¸Šå‹¾é€‰æ¡†å‹¾é€‰çš„å›¾æ ‡ã€‚é»˜è®¤ä¸ºè“è‰²å›¾æ ‡ã€‚æ¨èå°ºå¯¸ä¸º12x12ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIImage *checkedImage;
```

### uncheckedImage

æˆæƒé¡µé¢ä¸Šå‹¾é€‰æ¡†æœªå‹¾é€‰çš„å›¾æ ‡ã€‚é»˜è®¤ä¸ºç™½è‰²å›¾æ ‡ã€‚æ¨èå°ºå¯¸ä¸º12x12ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIImage *uncheckedImage;
```
### checkBoxSize

æˆæƒé¡µé¢ä¸Šæ¡æ¬¾å‹¾é€‰æ¡†å¤§å°ã€‚

**Declaration**

```objc
@property (nonatomic, assign) CGSize checkBoxSize;
```

### privacyTermsAttributes

éšç§æ¡æ¬¾æ–‡å­—å±æ€§ã€‚é»˜è®¤åŸºç¡€æ–‡å­—ç°è‰², æ¡æ¬¾è“è‰²é«˜äº®, 12ptã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) NSDictionary<NSAttributedStringKey, id> *privacyTermsAttributes;
```

### additionalPrivacyTerms

é¢å¤–çš„æ¡æ¬¾ã€‚é»˜è®¤ä¸ºç©ºã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) NSArray<OLPrivacyTermItem *> *additionalPrivacyTerms;
```

**Seealso**

[OLPrivacyTermItem](#OLPrivacyTermItem)

### termTextColor

æœåŠ¡æ¡æ¬¾æ™®é€šæ–‡å­—çš„é¢œè‰²ã€‚é»˜è®¤ç°è‰²ã€‚

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIColor *termTextColor;
```

### termsRect

éšç§æ¡æ¬¾ ä½ç½®åŠå¤§å°ï¼Œéšç§æ¡æ¬¾ï¼Œå®½éœ€å¤§äº50ï¼Œé«˜éœ€å¤§äº20ï¼Œæ‰ä¼šç”Ÿæ•ˆã€‚

**Declaration**

```objc
@property (nonatomic, assign) OLRect termsRect;
```

### customUIHandler

è‡ªå®šä¹‰åŒºåŸŸè§†å›¾çš„å¤„ç†block

**Declaration**

```objc
@property (nullable, nonatomic, copy) OLCustomUIHandler customUIHandler;
```

**Discussion**

æä¾›çš„è§†å›¾å®¹å™¨ä½¿ç”¨NSLayoutConstraintä¸ç›¸å…³çš„è§†å›¾è¿›è¡Œå¸ƒå±€çº¦æŸã€‚
å¦‚æœå¯¼èˆªæ æ²¡æœ‰éšè—, é¡¶éƒ¨ä¸å¯¼èˆªæ åº•éƒ¨å¯¹é½, å·¦è¾¹ä¸å±å¹•å·¦è¾¹å¯¹é½, å³è¾¹ä¸å±å¹•å³è¾¹å¯¹é½, åº•éƒ¨ä¸å±å¹•åº•éƒ¨å¯¹é½ã€‚
å¦‚æœå¯¼èˆªæ éšè—, é¡¶éƒ¨ä¸çŠ¶æ€æ åº•éƒ¨å¯¹é½, å·¦è¾¹ä¸å±å¹•å·¦è¾¹å¯¹é½, å³è¾¹ä¸å±å¹•å³è¾¹å¯¹é½, åº•éƒ¨ä¸å±å¹•åº•éƒ¨å¯¹é½ã€‚

**Seealso**

```objc
typedef void(^OLCustomUIHandler)(UIView *customAreaView);
```

### backgroundImage

æˆæƒé¡µé¢èƒŒæ™¯å›¾ç‰‡

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIImage *backgroundImage;
```

### landscapeBackgroundImage

æ¨ªå±æ¨¡å¼æˆæƒé¡µé¢èƒŒæ™¯å›¾ç‰‡

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIImage *landscapeBackgroundImage;
```

### supportedInterfaceOrientations

 æˆæƒé¡µé¢æ”¯æŒçš„æ¨ªç«–å±æ–¹å‘

**Declaration**

```objc
@property (nonatomic, assign) UIInterfaceOrientationMask supportedInterfaceOrientations;
```

### isPopup

 æ˜¯å¦ä¸ºå¼¹çª—æ¨¡å¼

**Declaration**

```objc
@property (nonatomic, assign) BOOL isPopup;
```

### popupRect

 å¼¹çª— ä½ç½®åŠå¤§å°ã€‚å¼¹çª—æ¨¡å¼æ—¶ï¼Œxè½´åç§»åªæ”¯æŒportraitLeftXOffsetå’ŒlandscapeLeftXOffset

**Declaration**

```objc
@property (nonatomic, assign) OLRect popupRect;
```

### popupCornerRadius

 å¼¹çª—åœ†è§’ï¼Œé»˜è®¤ä¸º6

**Declaration**

```objc
@property (nonatomic, assign) CGFloat popupCornerRadius;
```

### popupAnimationStyle

 å¼¹çª—åŠ¨ç”»ç±»å‹ï¼Œå½“popupAnimationStyleä¸ºOLAuthPopupAnimationStyleStyleCustomæ—¶ï¼ŒåŠ¨ç”»ä¸ºç”¨æˆ·è‡ªå®šä¹‰ï¼Œç”¨æˆ·éœ€è¦ä¼ ä¸€ä¸ªCATransitionå¯¹è±¡æ¥è®¾ç½®åŠ¨ç”»

**Declaration**

```objc
@property (nonatomic, assign) OLAuthPopupAnimationStyle popupAnimationStyle;
```

### popupTransitionAnimation

 å¼¹çª—è‡ªå®šä¹‰åŠ¨ç”»

**Declaration**

```objc
@property (nonatomic, strong) CATransition *popupTransitionAnimation;
```

### closePopupImage

 å¼¹çª—å…³é—­æŒ‰é’®å›¾ç‰‡ï¼Œå¼¹çª—å…³é—­æŒ‰é’®çš„å°ºå¯¸è·Ÿå›¾ç‰‡å°ºå¯¸ä¿æŒä¸€è‡´ã€‚
 å¼¹çª—å…³é—­æŒ‰é’®ä½äºå¼¹çª—å³ä¸Šè§’ï¼Œç›®å‰åªæ”¯æŒè®¾ç½®å…¶è·é¡¶éƒ¨åç§»å’Œè·å³è¾¹åç§»

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIImage *closePopupImage;
```

### closePopupTopOffset

 å¼¹çª—å…³é—­æŒ‰é’®è·å¼¹çª—é¡¶éƒ¨åç§»

**Declaration**

```objc
@property (nonatomic, strong) NSNumber *closePopupTopOffset;
```

### closePopupRightOffset

 å¼¹çª—å…³é—­æŒ‰é’®è·å¼¹çª—å³è¾¹åç§»

**Declaration**

```objc
@property (nonatomic, strong) NSNumber *closePopupRightOffset;
```

### loadingViewBlock

 æˆæƒé¡µé¢ï¼Œç‚¹å‡»ç™»å½•æŒ‰é’®ä¹‹åçš„å›è°ƒ

**Declaration**

```objc
@property (nonatomic, copy, nullable) OLLoadingViewBlock loadingViewBlock;
```

### webNaviHidden

 æœåŠ¡æ¡æ¬¾é¡µé¢å¯¼èˆªæ éšè—ã€‚é»˜è®¤ä¸éšè—

**Declaration**

```objc
@property (nonatomic, assign) BOOL webNaviHidden;
```

### webNaviTitle

 æœåŠ¡æ¡æ¬¾é¡µé¢å¯¼èˆªçš„æ ‡é¢˜ã€‚é»˜è®¤ä¸º"æœåŠ¡æ¡æ¬¾"ï¼Œç²—ä½“ã€17pt

**Declaration**

```objc
@property (nullable, nonatomic, strong) NSAttributedString *webNaviTitle;
```

### webNaviBgColor

 æœåŠ¡æ¡æ¬¾é¡µé¢å¯¼èˆªçš„èƒŒæ™¯é¢œè‰²ã€‚é»˜è®¤ç™½è‰²

**Declaration**

```objc
@property (nullable, nonatomic, strong) UIColor *webNaviBgColor;
```

# OLNetworkInfo

## Enum

### OLNetworkType

è®¾å¤‡ç½‘ç»œçš„ç±»å‹

**Declaration**

```objc
typedef NS_ENUM(NSInteger, OLNetworkType) {
    /** ç½‘ç»œç±»å‹æœªçŸ¥ */
    OLNetworkTypeNone = 0,
    /** ä»…ç§»åŠ¨èœ‚çªæ•°æ®ç½‘ç»œ */
    OLNetworkTypeCellular,
    /** ä»… WIFI ç½‘ç»œ */
    OLNetworkTypeWIFI,
    /** ç§»åŠ¨èœ‚çªæ•°æ®ç½‘ç»œåŠ WIFI ç½‘ç»œ */
    OLNetworkTypeCellularAndWIFI,
};
```

## Property

### carrierName

è¿è¥å•†åç§°

**Declaration**

```objc
@property (nullable, nonatomic, strong) NSString *carrierName;
```

### networkType

ç½‘ç»œç±»å‹

**Declaration**

```objc
@property (nonatomic, assign) OLNetworkType networkType;
```

**Discussion**

å³ä½¿è¿”å›é `OLNetworkTypeNone`, ä¹Ÿå¯èƒ½å› ä¸ºç»ˆç«¯ç”¨æˆ·æœªæˆæƒæ•°æ®ç½‘ç»œç½‘ç»œæƒé™è€Œæ— æ³•è®¿é—®è®¾å¤‡çš„ç§»åŠ¨èœ‚çªæ•°æ®ç½‘ç»œ

**Seealso**

[OLNetworkType](#OLNetworkType)

### detailNetworkType

å…·ä½“çš„ç½‘ç»œç±»å‹ï¼Œå¦‚2Gã€3Gã€4Gã€WIFI

**Declaration**

```objc
@property (nonatomic, copy) NSString *detailNetworkType;
```

**Discussion**

å³ä½¿è¿”å›é `OLNetworkTypeNone`, ä¹Ÿå¯èƒ½å› ä¸ºç»ˆç«¯ç”¨æˆ·æœªæˆæƒæ•°æ®ç½‘ç»œç½‘ç»œæƒé™è€Œæ— æ³•è®¿é—®è®¾å¤‡çš„ç§»åŠ¨èœ‚çªæ•°æ®ç½‘ç»œ

# OLPrivacyTermItem

éšç§å’Œæ¡æ¬¾æ¡ç›®

## Property

### termTitle

éšç§å’Œæ¡æ¬¾çš„æ ‡é¢˜

**Declaration**

```objc
@property (nonatomic, strong) NSString *termTitle;
```

### termTitle

éšç§å’Œæ¡æ¬¾çš„é“¾æ¥

**Declaration**

```objc
@property (nonatomic, strong) NSURL *termLink;
```

### index

æ¡æ¬¾ç´¢å¼•ï¼Œé»˜è®¤ä¸º0ï¼Œå½“æœ‰å¤šæ¡æ¡æ¬¾æ—¶ï¼Œä¼šæ ¹æ®æ­¤å±æ€§å‡åºæ’åˆ—æ¡æ¬¾

**Declaration**

```objc
@property (nonatomic, assign) NSInteger index;
```

## Method

### initWithTitle:linkURL:

ä½¿ç”¨æ ‡é¢˜å’Œé“¾æ¥åˆ›å»ºå®ä¾‹

**Declaration**

```objc
- (instancetype)initWithTitle:(NSString *)title linkURL:(NSURL *)url;
- (instancetype)initWithTitle:(NSString *)title linkURL:(NSURL *)url index:(NSInteger)index;
```

**Return Value**

è¿”å›æ–°çš„`OLPrivacyTermItem`å®ä¾‹



---
title: ios
type: ios
order: 0
---

## çŠ¶æ€ç 

åœ¨è¿”å›ä¸­çš„`"status"`å­—æ®µä¸‹çš„å†…å®¹, ç”¨äºåˆ¤æ–­å½“å‰æ“ä½œæ˜¯å¦æˆåŠŸã€‚

çŠ¶æ€ç  	|è¯´æ˜
------	|------
200	  	|æ“ä½œæˆåŠŸ
500	  	|æ“ä½œå¤±è´¥

## é”™è¯¯ç 

### `OneLogin`å®šä¹‰çš„ä¸šåŠ¡é”™è¯¯ç 

åœ¨è¿”å›ä¸­çš„`"errorCode"`å­—æ®µä¸‹çš„å†…å®¹, ç”¨äºåˆ¤æ–­é”™è¯¯çš„ç±»å‹ã€‚

é”™è¯¯ç  	|è¯´æ˜
------	|----------
-20101       |æœªé…ç½® AppID, è¯·å…ˆé…ç½® AppID ã€‚
-20102       |é‡å¤é¢„å–å·ã€‚å­˜åœ¨ä¸€æ¬¡é¢„å–å·æ“ä½œæœªå®Œæˆ, é‡å¤è°ƒç”¨äº†`preGetTokenWithCompletion:`, è¯·ç¨åé‡è¯•ã€‚
-20103       |é‡å¤å–å·ã€‚æˆæƒé¡µé¢å·²è°ƒèµ·, é‡å¤è°ƒç”¨`requestTokenWithViewController:viewModel:completion:`ã€‚
-20202       |å½“å‰å¯ä»¥è®¿é—®çš„èœ‚çªæ•°æ®ç½‘ç»œ, è¯·æ£€æŸ¥æ˜¯å¦å¼€å¯èœ‚çªç½‘ç»œã€‚
-20203       |ä¸æ”¯æŒçš„è¿è¥å•†ã€‚OneLogin ä»…æ”¯æŒåœ¨å¤§é™†åœ°åŒºæ”¯æŒä¸‰å¤§è¿è¥å•†
-20204			|æ— æ•ˆçš„ `accessCode` ã€‚ç¡®ä¿æ¯æ¬¡è°ƒç”¨ `requestTokenWithViewController:viewModel:completion:` ä¹‹å‰ï¼Œéƒ½æˆåŠŸè°ƒç”¨ `preGetTokenWithCompletion:`
-20302       |ç”¨æˆ·ç‚¹å‡»è¿”å›é”®å¹¶é€€å‡ºå–å·é¡µé¢ã€‚æˆæƒé¡µé¢ä¼šè‡ªåŠ¨å…³é—­ã€‚
-20303       |ç”¨æˆ·ç‚¹å‡»äº†åˆ‡æ¢è´¦å·æŒ‰é’®ã€‚æˆæƒé¡µé¢ä¸ä¼šè‡ªåŠ¨å…³é—­ã€‚
-40101       |ç§»åŠ¨è¿è¥å•†é¢„å–å·å¤±è´¥ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40102       |ç§»åŠ¨è¿è¥å•†å–å·å¤±è´¥ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40198       |ç§»åŠ¨è¿è¥å•†é¢„å–å·å¼‚å¸¸ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40199       |ç§»åŠ¨è¿è¥å•†å–å·å¼‚å¸¸ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40201       |è”é€šè¿è¥å•†é¢„å–å·å¤±è´¥ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40202       |è”é€šè¿è¥å•†å–å·å¤±è´¥ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40298       |è”é€šè¿è¥å•†é¢„å–å·å¼‚å¸¸ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40299       |è”é€šè¿è¥å•†å–å·å¼‚å¸¸ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40301       |ç”µä¿¡è¿è¥å•†é¢„å–å·å¤±è´¥ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40302       |ç”µä¿¡è¿è¥å•†å–å·å¤±è´¥ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40398       |ç”µä¿¡è¿è¥å•†é¢„å–å·å¼‚å¸¸ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-40399       |ç”µä¿¡è¿è¥å•†å–å·å¼‚å¸¸ã€‚è¯·æ£€æŸ¥æ•°æ®ç½‘ç»œå¯ç”¨æ€§ã€‚
-50100       |OneLogin æœåŠ¡æ¥å£è¿”å›å¼‚å¸¸
-50101       |OneLogin æœåŠ¡è¿”å›ä¸šåŠ¡å¤±è´¥
-50102       |OneLogin æœåŠ¡æ¥å£ç½‘ç»œå¼‚å¸¸ã€‚è¯·æ£€æŸ¥ç½‘ç»œå¯ç”¨æ€§ã€‚

>æ— æ³•ä½¿ç”¨æ•°æ®ç½‘ç»œ(2G, 3G, 4G)çš„å¯èƒ½åŸå› :
>1. åº”ç”¨æ²¡æœ‰æä¾›æ•°æ®ç½‘ç»œæƒé™, å¯¼è‡´æ— æ³•è®¿é—®
>2. æ‰‹æœºå¡æ¬ è´¹, å¯¼è‡´æ— æ³•è®¿é—®æ•°æ®ç½‘ç»œ
>3. æ‰€åœ¨åŒºåŸŸçš„æ•°æ®ç½‘ç»œä¿¡å·ä¸ä½³, å¯¼è‡´è®¿é—®è¶…æ—¶
>4. å¦‚æœè®¾å¤‡è¿æ¥çš„æ•°æ®ç½‘ç»œè‡ªåŠ¨é™çº§äº†, éƒ¨åˆ†è¿è¥å•†å¯¹è¾ƒæ—§çš„ç½‘ç»œåˆ¶å¼æ”¯æŒå¹¶ä¸ç¨³å®š
>5. è®¾å¤‡æ²¡æœ‰ä½¿ç”¨æœ‰æ•ˆçš„ SIM å¡

### Cocoa é”™è¯¯ç å‚è€ƒ

åœ¨ `metaData` ä¸­å¯èƒ½å«æœ‰Cocoaçš„é”™è¯¯ç , æ¥è‡ª`NSURLErrorDomain`çš„é”™è¯¯

ErrorCode	|Description	
----------|------------	
-999		|`NSURLErrorCancelled`è¯·æ±‚è¢«å–æ¶ˆ
-1000		|`NSURLErrorBadURL`URLå¼‚å¸¸
-1001 		|`NSURLErrorTimedOut`è¯·æ±‚è¶…æ—¶	
-1002		|`NSURLErrorUnsupportedURL `ä¸æ”¯æŒçš„URL
-1003		|`NSURLErrorCannotFindHost `æ— æ³•æ‰¾åˆ°ä¸»æœº
-1004		|`NSURLErrorCannotConnectToHost `æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨
-1005		|`NSURLErrorNetworkConnectionLost `ç½‘ç»œä¸¢å¤±, ä¸€èˆ¬å¼±ç½‘æˆ–è€…ç½‘ç»œçªç„¶ä¸­æ–­å¯¼è‡´
-1006		|`NSURLErrorDNSLookupFailed `DNSæŸ¥è¯¢å¤±è´¥
-1007		|`NSURLErrorHTTPTooManyRedirects `è¿‡å¤šçš„è¯·æ±‚è·³è½¬, æœåŠ¡å™¨è¿”å›è¿‡å¤šçš„302
-1008		|`NSURLErrorResourceUnavailable `è®¿é—®çš„èµ„æºä¸å¯ç”¨
-1009		|`NSURLErrorNotConnectedToInternet `æœªè¿æ¥åˆ°äº’è”ç½‘
-1010		|`NSURLErrorRedirectToNonExistentLocation `é‡å®šå‘åˆ°ä¸å­˜åœ¨çš„åœ°å€
-1011		|`NSURLErrorBadServerResponse `æœåŠ¡å™¨æ— å“åº”
-1012		|`NSURLErrorUserCancelledAuthentication `å®¢æˆ·ç«¯å–æ¶ˆäº†å®‰å…¨è®¤è¯, æˆ–è€…è¯ä¹¦ä¸åŒ¹é…æˆ–æœåŠ¡ç«¯ä¸æ”¯æŒsslå’Œtls
-1013		|`NSURLErrorUserAuthenticationRequired `å®¢æˆ·ç«¯è¦æ±‚å®‰å…¨è®¤è¯, æœåŠ¡ç«¯ä¸æ”¯æŒsslæˆ–tls
-1014		|`NSURLErrorZeroByteResource `è¿”å›å­—èŠ‚æµä¸ºç©º
-1015		|`NSURLErrorCannotDecodeRawData `æ— æ³•è§£æçš„åŸå§‹æ•°æ®
-1016		|`NSURLErrorCannotDecodeContentData `è§£æè¿”å›å†…å®¹é”™è¯¯
-1017		|`NSURLErrorCannotParseResponse `æ— æ³•è§£æå“åº”ä½“
-1102		|`NSURLErrorNoPermissionsToReadFile `æ— èµ„æºè®¿é—®æƒé™, ä¸€èˆ¬ä¸º`challenge`ç­‰å‚æ•°æœ‰è¯¯, `challenge`åªå¯è¢«ç”¨æ¥è¯·æ±‚ä¸€æ¬¡, å¤±æ•ˆåå¯èƒ½ä¼šé‡åˆ°è¯¥é—®é¢˜
-1200		|`NSURLErrorSecureConnectionFailed `åˆ›å»ºå®‰å…¨è¿æ¥å¤±è´¥
-1201		|`NSURLErrorServerCertificateHasBadDate `æœåŠ¡ç«¯è¯ä¹¦å¼‚å¸¸
-1202		|`NSURLErrorServerCertificateUntrusted `æœåŠ¡ç«¯è¯ä¹¦ä¸å¯ä¿¡
-1203		|`NSURLErrorServerCertificateHasUnknownRoot `æœåŠ¡ç«¯ä½¿ç”¨æœªçŸ¥çš„æ ¹è¯ä¹¦
